
#include "atags.h"
#include "atag_defs.h"

void initAtags( void )
{
	extern uint32_t * _sccmram;
	uint32_t * tgs = _sccmram;

	// TAG_CORE
	struct tag_header * hdr = (struct tag_header *)tgs;
	hdr->tag = ATAG_CORE;
	tgs += (sizeof(struct tag_header) >> 2);
	hdr->size = (sizeof(struct tag_header)) >> 2;

	struct tag_core * tagCore = (struct tag_header *)tgs;
	tagCore->flags = 0;
	tagCore->pagesize = 0;
	tagCore->rootdev  = 0;
	tgs += (sizeof(struct tag_core) >> 2);
	hdr->size += (sizeof(struct tag_core) >> 2);


	// TAG_MEMORY
	hdr = (struct tag_header *)tgs;
	hdr->tag = ATAG_MEM;
	tgs += (sizeof(struct tag_header) >> 2);

	struct tag_mem32 * tagCore = (struct tag_header *)tgs;
	tagCore->flags = 0;
	tagCore->pagesize = 0;
	tagCore->rootdev  = 0;
	tgs += (sizeof(struct tag_core) >> 2);

}

uint32_t * tags( void )
{
	extern uint32_t * _sccmram;
	uint32_t * res = _sccmram;
	return res;
}


